import{p as J,S as Q}from"./index.bde948db.js";import{d as K,a as f,b as l,w as z,o as Z,u as _,G as x,X as ee,_ as R,f as X,i as te,S as ae,M as P,N as Y,O,R as I,m as oe,aF as ne,ai as ie,D as se,h as le}from"./vue-router.esm-bundler.a03b8b02.js";import{p as re,u as ce,a as de,c as M,e as D,b as ue,d as fe}from"./components.eb927237.js";import{l as H}from"./shared.33322536.js";import{a as ve,c as V,d as be}from"./elements.39521dbc.js";import{R as me}from"./index.7505bc45.js";function W(e){return["horizontal","vertical"].includes(e)}const pe={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:W},itemDirection:{type:String,default:"horizontal",validator:W},fixedBottom:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},disabledColor:{type:String},color:{type:String},indicatorColor:{type:String},indicatorSize:{type:[String,Number]},elevation:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!1},offsetTop:re(J,"offsetTop"),onClick:{type:Function},onChange:{type:Function},"onUpdate:active":{type:Function}},G=Symbol("TABS_BIND_TAB_KEY"),j=Symbol("TABS_COUNT_TAB_KEY");function ye(){const{childProviders:e,bindChildren:o}=de(G),{length:i}=ce(j);return{length:i,tabList:e,bindTabList:o}}const{n:he,classes:Ce}=M("tabs"),$e=K({name:"VarTabs",components:{VarSticky:Q},inheritAttrs:!1,props:pe,setup(e){const o=f("0px"),i=f("0px"),v=f("0px"),b=f("0px"),n=f(!1),m=f(null),y=l(()=>e.active),A=l(()=>e.activeColor),r=l(()=>e.inactiveColor),T=l(()=>e.disabledColor),S=l(()=>e.itemDirection),{tabList:h,bindTabList:w,length:c}=ye(),g=a=>{var F;const t=(F=a.name.value)!=null?F:a.index.value,{active:p,onChange:$,onClick:q}=e;D(e["onUpdate:active"],t),D(q,t),t!==p&&D($,t)},E=()=>h.find(({name:a})=>e.active===a.value),B=a=>h.find(({index:t})=>(a!=null?a:e.active)===t.value),N=()=>{if(c.value===0)return;const{active:a}=e;if(ee(a)){const t=a>c.value-1?c.value-1:0;return D(e["onUpdate:active"],t),B(t)}},d=()=>{n.value=h.length>=5},u=({element:a})=>{const t=a.value;e.layoutDirection==="horizontal"?(o.value=`${t==null?void 0:t.offsetWidth}px`,v.value=`${t==null?void 0:t.offsetLeft}px`):(i.value=`${t==null?void 0:t.offsetHeight}px`,b.value=`${t==null?void 0:t.offsetTop}px`)},C=({element:a})=>{if(!n.value)return;const t=m.value,p=a.value;if(e.layoutDirection==="horizontal"){const $=p.offsetLeft+p.offsetWidth/2-t.offsetWidth/2;V(t,{left:$,animation:H})}else{const $=p.offsetTop+p.offsetHeight/2-t.offsetHeight/2;V(t,{top:$,animation:H})}},s=()=>{const a=E()||B()||N();!a||a.disabled.value||(d(),u(a),C(a))};return w({active:y,activeColor:A,inactiveColor:r,disabledColor:T,itemDirection:S,resize:s,onTabClick:g}),z(()=>c.value,async()=>{await be(),s()}),z(()=>e.active,s),Z(()=>window.addEventListener("resize",s)),_(()=>window.removeEventListener("resize",s)),{indicatorWidth:o,indicatorHeight:i,indicatorX:v,indicatorY:b,scrollable:n,scrollerEl:m,Transition:x,toSizeUnit:ve,n:he,classes:Ce,resize:s}}});function Te(e,o,i,v,b,n){return X(),te(ne(e.sticky?e.n("$-sticky"):e.Transition),{"offset-top":e.sticky?e.offsetTop:null},{default:ae(()=>[P("div",oe({class:e.classes(e.n(),e.n("$--box"),e.n(`--item-${e.itemDirection}`),e.n(`--layout-${e.layoutDirection}-padding`),[e.elevation,e.n("$-elevation--4")],[e.fixedBottom,e.n("--fixed-bottom")],[e.safeArea,e.n("--safe-area")]),style:{background:e.color}},e.$attrs),[P("div",{ref:"scrollerEl",class:Y(e.classes(e.n("tab-wrap"),[e.scrollable,e.n(`--layout-${e.layoutDirection}-scrollable`)],e.n(`--layout-${e.layoutDirection}`)))},[O(e.$slots,"default"),P("div",{class:Y(e.classes(e.n("indicator"),e.n(`--layout-${e.layoutDirection}-indicator`))),style:I({width:e.layoutDirection==="horizontal"?e.indicatorWidth:e.toSizeUnit(e.indicatorSize),height:e.layoutDirection==="horizontal"?e.toSizeUnit(e.indicatorSize):e.indicatorHeight,transform:e.layoutDirection==="horizontal"?`translateX(${e.indicatorX})`:`translateY(${e.indicatorY})`,background:e.indicatorColor||e.activeColor})},null,6)],2)],16)]),_:3},8,["offset-top"])}const L=R($e,[["render",Te]]);L.install=function(e){e.component(L.name,L)};const Se={name:{type:[String,Number]},disabled:{type:Boolean,default:!1},onClick:{type:Function}};function ge(){const{parentProvider:e,bindParent:o}=ue(G),{index:i}=fe(j);if(!e||!o||!i)throw Error("<var-tab/> must in <var-tabs/>");return{index:i,tabs:e,bindTabs:o}}const{n:k,classes:Be}=M("tab"),De=K({name:"VarTab",directives:{Ripple:me},props:Se,setup(e){const o=f(null),i=l(()=>e.name),v=l(()=>e.disabled),b=l(()=>o.value),{index:n,tabs:m,bindTabs:y}=ge(),{onTabClick:A,active:r,activeColor:T,inactiveColor:S,disabledColor:h,itemDirection:w,resize:c}=m,g={name:i,index:n,disabled:v,element:b};y(g);const E=()=>{const{disabled:d,name:u}=e;return d?h.value:r.value===u||r.value===(n==null?void 0:n.value)?T.value:S.value},B=()=>{const{disabled:d,name:u}=e;return d?k("$-tab--disabled"):r.value===u||r.value===(n==null?void 0:n.value)?k("$-tab--active"):k("$-tab--inactive")},N=d=>{const{disabled:u,name:C,onClick:s}=e;u||(s==null||s(C!=null?C:n.value,d),A(g))};return z(()=>e.name,c),z(()=>e.disabled,c),{n:k,classes:Be,tabEl:o,active:r,activeColor:T,inactiveColor:S,itemDirection:w,computeColorStyle:E,computeColorClass:B,handleClick:N}}});function ke(e,o,i,v,b,n){const m=ie("ripple");return se((X(),le("div",{class:Y(e.classes(e.n(),e.n("$--box"),e.computeColorClass(),e.n(`--${e.itemDirection}`))),ref:"tabEl",style:I({color:e.computeColorStyle()}),onClick:o[0]||(o[0]=(...y)=>e.handleClick&&e.handleClick(...y))},[O(e.$slots,"default")],6)),[[m,{disabled:e.disabled}]])}const U=R(De,[["render",ke]]);U.install=function(e){e.component(U.name,U)};export{U as T,L as a};
