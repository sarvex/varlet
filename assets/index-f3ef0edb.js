import{I as F}from"./index-33db06d9.js";import{F as Y,u as j}from"./provide-54996f70.js";import{v as W}from"./index-73a91f38.js";import{u as q,a as L,d as C,e as J,f as Q,i as Z,b as c,c as _}from"./components-02edd959.js";import{d as x,a as E,b as N,w as ee,n as ae,_ as ne,p as S,ag as se,f as K,h as A,M as D,D as oe,N as d,R as le,O as b,q as f}from"./vue-router.esm-bundler-0d52b99f.js";const P=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),R=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function be(){const{bindChildren:e,childProviders:s}=q(P),{length:r}=L(R);return{length:r,checkboxes:s,bindCheckboxes:e}}const re={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:C(),onChange:C(),"onUpdate:modelValue":C()};function ie(){const{bindParent:e,parentProvider:s}=J(P),{index:r}=Q(R);return{index:r,checkboxGroup:s,bindCheckboxGroup:e}}const{n:ce,classes:de}=_("checkbox"),te=x({name:"VarCheckbox",directives:{Ripple:W},components:{VarIcon:F,VarFormDetails:Y},props:re,setup(e){const s=E(!1),r=N(()=>s.value===e.checkedValue),y=N(()=>e.checkedValue),t=E(!1),{checkboxGroup:o,bindCheckboxGroup:u}=ie(),{form:a,bindForm:m}=j(),{errorMessage:k,validateWithTrigger:U,validate:w,resetValidation:v}=Z(),z=n=>{ae(()=>{const{validateTrigger:l,rules:i,modelValue:h}=e;U(l,n,i,h)})},g=n=>{s.value=n;const{checkedValue:l,onChange:i}=e;c(e["onUpdate:modelValue"],s.value),c(i,s.value),z("onChange"),n===l?o==null||o.onChecked(l):o==null||o.onUnchecked(l)},M=n=>{const{disabled:l,readonly:i,checkedValue:h,uncheckedValue:$,onClick:G}=e;if(a!=null&&a.disabled.value||l||(c(G,n),a!=null&&a.readonly.value||i))return;t.value=!0;const I=o?o.checkedCount.value>=Number(o.max.value):!1;!r.value&&I||g(r.value?$:h)},H=n=>{const{checkedValue:l,uncheckedValue:i}=e;s.value=n.includes(l)?l:i},X=()=>{t.value=!1},V=()=>{c(e["onUpdate:modelValue"],e.uncheckedValue),v()},T=n=>{const{checkedValue:l,uncheckedValue:i}=e;![l,i].includes(n)&&(n=r.value?i:l),g(n)},B=()=>w(e.rules,e.modelValue);ee(()=>e.modelValue,n=>{s.value=n},{immediate:!0});const O={checkedValue:y,checked:r,sync:H,validate:B,resetValidation:v,reset:V,resetWithAnimation:X};return c(u,O),c(m,O),{withAnimation:t,checked:r,errorMessage:k,checkboxGroupErrorMessage:o==null?void 0:o.errorMessage,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,n:ce,classes:de,handleClick:M,toggle:T,reset:V,validate:B,resetValidation:v}}});function ue(e,s,r,y,t,o){const u=S("var-icon"),a=S("var-form-details"),m=se("ripple");return K(),A("div",{class:d(e.n("wrap")),onClick:s[0]||(s[0]=(...k)=>e.handleClick&&e.handleClick(...k))},[D("div",{class:d(e.n())},[oe((K(),A("div",{class:d(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:le({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?b(e.$slots,"checked-icon",{key:0},()=>[f(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):b(e.$slots,"unchecked-icon",{key:1},()=>[f(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6)),[[m,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),D("div",{class:d(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[b(e.$slots,"default")],2)],2),f(a,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const p=ne(te,[["render",ue]]);p.install=function(e){e.component(p.name,p)};export{p as C,be as u};
