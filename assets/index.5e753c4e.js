import{R as O}from"./index.d42fae22.js";import{I as M}from"./index.5d4d8c49.js";import{B as q}from"./index.ee7ded0f.js";import{a as h,d as A}from"./elements.ad8d78a7.js";import{c as Q,e as Y}from"./components.82f13bf2.js";import{u as Z}from"./zIndex.e8794d81.js";import{u as G}from"./lock.95ea19af.js";import{d as J,a as o,b as K,w as X,n as _,_ as x,p as R,ai as ee,D as oe,f as i,h as n,M as I,O as r,N as t,j as u,R as c,Q as T,q as H,S as te,aj as ae}from"./vue-router.esm-bundler.eec20f43.js";function le(e){return["fill","contain","cover","none","scale-down"].includes(e)}const ie={src:{type:String},fit:{type:String,validator:le,default:"cover"},imageHeight:{type:[String,Number]},imageWidth:{type:[String,Number]},layout:{type:String,default:"column"},floating:{type:Boolean,default:!1},"onUpdate:floating":{type:Function},floatingDuration:{type:Number,default:250},alt:{type:String},title:{type:String},subtitle:{type:String},description:{type:String},elevation:{type:[Number,String]},ripple:{type:Boolean,default:!1},onClick:{type:Function}},{n:ne,classes:se}=Q("card"),re=500,ue=J({name:"VarCard",directives:{Ripple:O},components:{VarIcon:M,VarButton:q},props:ie,setup(e){const m=o(null),N=o(null),d=o("auto"),v=o("auto"),f=o("100%"),s=o("100%"),a=o("auto"),l=o("auto"),g=o(void 0),y=o("hidden"),w=o("0px"),$=o("0"),b=K(()=>e.layout==="row"),k=o(!1),S=o(!1),{zIndex:V}=Z(()=>e.floating,1);G(()=>e.floating,()=>!b.value);let C="auto",D="auto",B=null;const p=o(null),L=async()=>{clearTimeout(p.value),clearTimeout(B),p.value=null,p.value=setTimeout(async()=>{const{width:z,height:P,left:j,top:E}=m.value.getBoundingClientRect();d.value=h(z),v.value=h(P),f.value=d.value,s.value=v.value,a.value=h(E),l.value=h(j),g.value="fixed",C=a.value,D=l.value,k.value=!0,await A(),a.value="0",l.value="0",f.value="100vw",s.value="100vh",w.value="auto",$.value="1",y.value="auto",S.value=!0},e.ripple?re:0)},W=()=>{clearTimeout(B),clearTimeout(p.value),p.value=null,f.value=d.value,s.value=v.value,a.value=C,l.value=D,w.value="0px",$.value="0",k.value=!1,B=setTimeout(()=>{d.value="auto",v.value="auto",f.value="100%",s.value="100%",a.value="auto",l.value="auto",C="auto",D="auto",y.value="hidden",g.value=void 0,S.value=!1},e.floatingDuration)},U=()=>{Y(e["onUpdate:floating"],!1)};return X(()=>e.floating,z=>{b.value||_(()=>{z?L():W()})},{immediate:!0}),{n:ne,classes:se,toSizeUnit:h,card:m,cardFloater:N,holderWidth:d,holderHeight:v,floater:p,floaterWidth:f,floaterHeight:s,floaterTop:a,floaterLeft:l,floaterPosition:g,floaterOverflow:y,contentHeight:w,opacity:$,zIndex:V,isRow:b,close:U,showFloatingButtons:k,floated:S}}});const de=["src","alt"];function ve(e,m,N,d,v,f){const s=R("var-icon"),a=R("var-button"),l=ee("ripple");return oe((i(),n("div",{ref:"card",class:t(e.classes(e.n(),[e.isRow,e.n("--layout-row")],[e.elevation,`var-elevation--${e.elevation}`,"var-elevation--1"])),style:c({zIndex:e.floated?e.zIndex:void 0}),onClick:m[0]||(m[0]=(...g)=>e.onClick&&e.onClick(...g))},[I("div",{ref:"cardFloater",class:t(e.classes(e.n("floater"))),style:c({width:e.floaterWidth,height:e.floaterHeight,top:e.floaterTop,left:e.floaterLeft,overflow:e.floaterOverflow,position:e.floaterPosition,transition:e.floated?`background-color ${e.floatingDuration}ms, color ${e.floatingDuration}ms, width ${e.floatingDuration}ms, height ${e.floatingDuration}ms, top ${e.floatingDuration}ms, left ${e.floatingDuration}ms`:void 0})},[r(e.$slots,"image",{},()=>[e.src?(i(),n("img",{key:0,class:t(e.n("image")),style:c({objectFit:e.fit,height:e.toSizeUnit(e.imageHeight),width:e.toSizeUnit(e.imageWidth)}),src:e.src,alt:e.alt},null,14,de)):u("v-if",!0)]),I("div",{class:t(e.n("container"))},[r(e.$slots,"title",{},()=>[e.title?(i(),n("div",{key:0,class:t(e.n("title"))},T(e.title),3)):u("v-if",!0)]),r(e.$slots,"subtitle",{},()=>[e.subtitle?(i(),n("div",{key:0,class:t(e.n("subtitle"))},T(e.subtitle),3)):u("v-if",!0)]),r(e.$slots,"description",{},()=>[e.description?(i(),n("div",{key:0,class:t(e.n("description"))},T(e.description),3)):u("v-if",!0)]),e.$slots.extra?(i(),n("div",{key:0,class:t(e.n("footer"))},[r(e.$slots,"extra")],2)):u("v-if",!0),e.$slots["floating-content"]&&!e.isRow?(i(),n("div",{key:1,class:t(e.n("floating-content")),style:c({height:e.contentHeight,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[r(e.$slots,"floating-content")],6)):u("v-if",!0)],2),e.showFloatingButtons?(i(),n("div",{key:0,class:t(e.classes(e.n("floating-buttons"),"var--box")),style:c({zIndex:e.zIndex,opacity:e.opacity,transition:`opacity ${e.floatingDuration*2}ms`})},[r(e.$slots,"close-button",{},()=>[H(a,{"var-card-cover":"",round:"",class:t(e.classes(e.n("close-button"),"var-elevation--6")),onClick:ae(e.close,["stop"])},{default:te(()=>[H(s,{"var-card-cover":"",name:"window-close",class:t(e.n("close-button-icon"))},null,8,["class"])]),_:1},8,["class","onClick"])])],6)):u("v-if",!0)],6),I("div",{class:t(e.n("holder")),style:c({width:e.holderWidth,height:e.holderHeight})},null,6)],6)),[[l,{disabled:!e.ripple||e.floater}]])}const F=x(ue,[["render",ve]]);F.install=function(e){e.component(F.name,F)};export{F as C};
