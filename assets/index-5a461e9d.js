import{p as P,P as $}from"./index-bc51d386.js";import{B as U}from"./index-b3c6abbd.js";import{d,p as V,c as D,f as l,m as N}from"./components-e9444427.js";import{d as R}from"./shared-f14f9930.js";import{p as A}from"./index-ed871f6d.js";import{a as z}from"./elements-f00c3e04.js";import{d as j,a as O,w as S,_ as I,p as w,f as v,i as B,S as h,M as m,N as i,O as T,P as C,Q as y,R as L,j as b,m as M,aB as Q,r as W,n as X,W as q,X as E}from"./vue-router.esm-bundler-de96f312.js";function F(o){return["left","center","right"].includes(o)}const G={show:{type:Boolean,default:!1},width:{type:[Number,String]},title:{type:String},message:{type:String},messageAlign:{type:String,default:"left",validator:F},confirmButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!0},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonTextColor:{type:String},cancelButtonTextColor:{type:String},confirmButtonColor:{type:String},cancelButtonColor:{type:String},dialogClass:{type:String},dialogStyle:{type:Object},onBeforeClose:d(),onConfirm:d(),onCancel:d(),"onUpdate:show":d(),...V(P,["overlay","overlayClass","overlayStyle","lockScroll","closeOnClickOverlay","teleport","onOpen","onClose","onOpened","onClosed","onClickOverlay","onRouteChange"])},{n:H,classes:J}=D("dialog"),K=j({name:"VarDialog",components:{VarPopup:$,VarButton:U},inheritAttrs:!1,props:G,setup(o){const a=O(!1),r=O(!1),e=()=>l(o["onUpdate:show"],!1),c=()=>{const{closeOnClickOverlay:n,onClickOverlay:u,onBeforeClose:k}=o;if(l(u),!!n){if(k!=null){k("close",e);return}l(o["onUpdate:show"],!1)}},p=()=>{const{onBeforeClose:n,onConfirm:u}=o;if(l(u),n!=null){n("confirm",e);return}l(o["onUpdate:show"],!1)},f=()=>{const{onBeforeClose:n,onCancel:u}=o;if(l(u),n!=null){n("cancel",e);return}l(o["onUpdate:show"],!1)};return S(()=>o.show,n=>{a.value=n},{immediate:!0}),S(()=>o.closeOnClickOverlay,n=>{if(o.onBeforeClose!=null){r.value=!1;return}r.value=n},{immediate:!0}),{n:H,classes:J,pack:A,dt:R,popupShow:a,popupCloseOnClickOverlay:r,handleClickOverlay:c,confirm:p,cancel:f,toSizeUnit:z}}});function Y(o,a,r,e,c,p){const f=w("var-button"),n=w("var-popup");return v(),B(n,{class:i(o.n("popup")),"var-dialog-cover":"",show:o.popupShow,overlay:o.overlay,"overlay-class":o.overlayClass,"overlay-style":o.overlayStyle,"lock-scroll":o.lockScroll,"close-on-click-overlay":o.popupCloseOnClickOverlay,teleport:o.teleport,onOpen:o.onOpen,onClose:o.onClose,onClosed:o.onClosed,onOpened:o.onOpened,onRouteChange:o.onRouteChange,onClickOverlay:o.handleClickOverlay},{default:h(()=>[m("div",M({class:o.classes(o.n("$--box"),o.n(),o.dialogClass),style:{width:o.toSizeUnit(o.width),...o.dialogStyle}},o.$attrs),[m("div",{class:i(o.n("title"))},[T(o.$slots,"title",{},()=>[C(y(o.dt(o.title,o.pack.dialogTitle)),1)])],2),m("div",{class:i(o.n("message")),style:L({textAlign:o.messageAlign})},[T(o.$slots,"default",{},()=>[C(y(o.message),1)])],6),m("div",{class:i(o.n("actions"))},[o.cancelButton?(v(),B(f,{key:0,class:i(o.classes(o.n("button"),o.n("cancel-button"))),"var-dialog-cover":"",text:"","text-color":o.cancelButtonTextColor,color:o.cancelButtonColor,onClick:o.cancel},{default:h(()=>[C(y(o.dt(o.cancelButtonText,o.pack.dialogCancelButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):b("",!0),o.confirmButton?(v(),B(f,{key:1,class:i(o.classes(o.n("button"),o.n("confirm-button"))),"var-dialog-cover":"",text:"","text-color":o.confirmButtonTextColor,color:o.confirmButtonColor,onClick:o.confirm},{default:h(()=>[C(y(o.dt(o.confirmButtonText,o.pack.dialogConfirmButtonText)),1)]),_:1},8,["class","text-color","color","onClick"])):b("",!0)],2)],16)]),_:3},8,["class","show","overlay","overlay-class","overlay-style","lock-scroll","close-on-click-overlay","teleport","onOpen","onClose","onClosed","onOpened","onRouteChange","onClickOverlay"])}const s=I(K,[["render",Y]]);let t;function g(o){return Q()?new Promise(a=>{g.close();const r=q(o)||E(o)?{message:String(o)}:o,e=W(r);e.teleport="body",t=e;const{unmountInstance:c}=N(s,e,{onConfirm:()=>{l(e.onConfirm),a("confirm")},onCancel:()=>{l(e.onCancel),a("cancel")},onClose:()=>{l(e.onClose),a("close")},onClosed:()=>{l(e.onClosed),c(),t===e&&(t=null)},onRouteChange:()=>{c(),t===e&&(t=null)},"onUpdate:show":p=>{e.show=p}});e.show=!0}):Promise.resolve()}s.install=function(o){o.component(s.name,s)};g.install=function(o){o.component(s.name,s)};g.close=()=>{if(t!=null){const o=t;t=null,X().then(()=>{o.show=!1})}};g.Component=s;export{g as D};
